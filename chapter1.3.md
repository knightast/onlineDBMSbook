# 数据管理系统的历史

研究工具的发展历史很有价值。历史向我们揭示了人们是如何将一个想法变成适合自己使用的工具的。这通常是一个曲折的过程，充斥着不同的甚至截然相反的见解、激烈的竞争、以及一次又一次的试错。学习历史可以帮助我们理解工具的本质，避免我们重蹈前人的覆辙。

数据管理系统的发展历史已经超过了半个世纪，里面有很多精彩的故事和发人深思的观点。但是，要挖掘和重现这段历史并非易事，需要收集大量的客观史料。笔者希望未来能有机会去整理这一段历史，因为这件事意义非凡。但目前我们只能根据已知的信息粗略介绍一下这项技术的发展历程。

## 从文件系统到关系数据库

上世纪60年代以前，计算机世界里能提供通用数据管理功能的只有文件系统。文件系统不区分数据的种类。对任何数据，无论是文档、照片还是可执行程序，文件系统都将它们视作的字符串，记录在一个个的文件中。系统提供简单的文件读写接口，允许应用程序访问字符串中任意位置的内容。此外，文件系统还提供文件级别的持久性和安全性保障，确保文件不会轻易丢失或遭到破坏。至于文件中的数据应该如何组织和管理，文件系统将其全权交给了应用程序。

文件系统简单而通用的功能确实给应用开发带来了明显的便利。然而，人们在实践过程中逐渐发现，文件系统承担的数据管理功能粒度过粗，程序开发人员仍然需要花费大量时间去构建文件内部的数据组织和管理功能，而且其中的很多功能对大多数应用而言就是一样的。这就萌发了在文件系统的基础上构建数据管理系统的想法 - 能不能将应用程序对细粒度数据管理的共同需求抽象出来，再用通用的数据管理系统去满足这种需求？为了实现这个想法，首先需要统一应用程序对数据的组织方式。也就是说，我们首先需要为数据管理系统确定一个数据模型，用于定义数据的组织结构。有了数据模型之后，我们才能在其上定义数据管理功能的具体接口，并确定数据管理系统内部的实现方式。

在上世纪60年代，应用软件通常更重视数据的第二大功用，即将数据作为事实的凭据，用于实现人、财、物的管理。因此，当时的数据更多是记录关于人、财、物的信息。基于这种用途，人们很自然会想到将数据组织成“图”的形式。图中的节点代表人和物这样的实体，而图中的边代表人与人或人与物之间的联系。有了这样的图，人们可以沿着图的结构顺藤摸瓜，快速定位自己想要的信息。例如，张三和张三的银行账户都可被表示为图中的节点，节点中存放各自的相关信息，比如张三的节点存放了他的姓名、身份证号码、地址，银行账户节点则存放账号和余额等信息。同时，两个节点用边连接，代表张三的银行账户是属于张三的。这样，一旦我们定位了张三，就能够通过其节点上的边跳转到他的账户节点，获取他的账户信息，而后还可以从账户节点跳转到开户行节点，等等。早期的数据管理系统使用的“网状模型”和“层次模型”都是基于图的数据模型。

随着数据模型的确立，几款成熟的数据管理系统于60年代中期相继问世了。其中的代表包括：由GE公司研发的基于网状模型的IDS（Integrated Data Store）和由IBM公司研发的基于层次模型的IMS（Information Management System）。二者都在商业上取得了成功，让开发人员认识到了数据管理系统带来的便利。越来越多的应用软件开始被构建在数据管理系统之上。然而，正当大家顺理成章接受“图”作为数据管理的标准模型时，来自IBM的一位工程师大胆地提出了质疑，并从此改变了数据管理系统的历史轨迹。这位工程师名叫Edgar Frank Codd。

Codd认为，“网状模型”和“层次模型”的设计对软件工程是不利的；虽然基于这两种模型的数据管理系统能够承担一定的数据管理功能，但数据管理系统和应用程序之间的耦合度过高，导致软件整体难以维护。我们在前文阐述过，一个好的系统一定是一个好的模块。在Codd看来，像IDS和IMS这样的系统并不是好的模块，它们与应用程序之间的耦合度太高，违背了信息隐藏的原则。Codd的看法是中肯的。IDS和IMS将数据访问的详细过程交给了应用程序去实现。也就是说，应用程序需要告诉数据管理系统，如何在图上进行跳转，从而一步一步逼近想要的信息。可想而知，一旦数据的组织结构发生变化，原有的数据访问过程就失效了，应用程序就必须做相应的修正。软件越复杂，数据管理系统和应用程序的相互制约就越严重。

于是，Codd提出重新划分数据管理系统和应用程序之间的界限，将数据访问的过程尽可能交给数据管理系统去实现。在他看来，最好的情况是让应用程序只告诉数据管理系统自己想要什么，然后让数据管理系统自己决定如何获取数据。基于这种想法，Codd提出了关系模型。关系模型将数据组织成一张张的表，并且提供了一套结合了集合论和谓词逻辑的数据访问接口，让使用者可以清晰地表述自己的数据访问需求。（这一套访问接口后来演变成了SQL语言。）随着Codd对关系模型的竭力推广，关系模型逐渐得到学界和工业界的认可。70年代末，以Oracle为代表的关系数据库系统问世，逐渐取代了IDS和IMS，并走上了长盛不衰之路。

## 数据管理系统的多样化

关系数据库系统自一统江湖之后其地位一直非常稳固。这得益于关系模型自身的优越性，但也与其他的人为因素相关。自80年代起，Oracle成为了关系数据库的领跑者，并竭尽商业手段为自己构建了庞大的用户生态。整个商用数据管理系统的市场几乎完全被Oracle、IBM、Microsoft的关系数据库产品垄断。新的竞争者难以进入。同时，应用软件的生态变得越来越完善和成熟；SQL成为了数据访问的接口标准；围绕关系数据库的中间件和运维工具也越来越丰富；这些都进一步巩固了关系数据库系统的地位。但关系数据库的垄断却限制了数据管理系统向多样化方向发展。80年代和90年代，科技人员陆续提出了若干数据管理系统的新想法，比如演绎数据库（Deductive Database）和面向对象数据库（Object Oriented Database）。但这些系统未能被市场接受。部分原因是难以和关系数据库的庞大用户生态和产品生态相抗衡。与此同时，各种新的功能被不断添加到关系数据库系统中，将关系数据库变得越来越臃肿，复杂度到了无以复加的地步。

这样的局面直到21世纪之后才被打破。


