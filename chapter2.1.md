# 数据模型

在概论中我们谈及了数据管理系统的目的、作用和历史，也列举了一些评判系统好坏的标准。本章进入正题。我们开始讨论数据管理系统的具体功能接口应该如何设计。

对应用程序而言，数据管理系统提供的最基本功能无非两个。第一，它能将数据保存到系统中。第二，在需要时，它能方便地从系统中取出数据。当然，如前文所述，系统还应该保证数据的持久性、安全性、真实性，并提供数据更新和数据处理的能力。但这些都是建立在数据存取功能之上的。我们首先需要确定的是数据的存取接口。

以如下数据为例：

> A man named Jason Chang, who was born on Jan 20, 2001, lives in Beijing, at 20 Yamaha Street.

> A woman named Jessie Li, who was born on Dec 4, 1992, lives in Shanghai, at 200 Sichuan Street.

系统应该提供什么样的接口，让我们可以方便的对以上数据进行存取？一种方式是将关于Jason Chang的数据打成一个包，一起存入系统。需要时，我们提供“Jason Chang”这个名字，系统即可将他的数据取出来。同理，我们也可以将关于Jessie Li的数据打包存入系统。需要时，通过“Jessie Li”这个名字将数据取出。计算机为了实现这样的存取功能，需要将数据组织在如下的映射结构中：

>"Jason Chang" &rarr; "A man named Jason Chang, who was born on Jan 20, 2001, lives in Beijing, at 20 Yamaha Street."

>"Jessie Li" &rarr; "A woman named Jessie Li, who was born on Dec 4, 1992, lives in Shanghai, at 200 Sichuan Street."

这里的人名可以视为**键**（key），关于人的数据可以视为**值**（value）。也就是说，我们是在用如下的**键值对**结构组织数据。

> *key* &rarr; *value* 

这个结构用“键”标识每一项数据，通过“键”对数据进行存取。

假设我们积累了很多人的数据，除了Jason Chang和Jessie Li，还有包括其他人。这个时候，我们想从系统中取出居住在地址20 Yamaha Street的人的信息，该如何做？我们发现，如果用“键值对”组织数据，系统是无法直接实现以上的数据抽取的。虽然“20 Yamaha Street”的字眼藏在键值对的值中，但对计算机而言，这些值只是一个个的它无法理解的字符串。我们只能将所有的键值对依次取出来，然后一个一个判断哪些人住在20 Yamaha Street。也就是说，“键值对”这种组织结构太简单，无法实现复杂的数据存取功能。

如果我们将数据组织在下面的结构中，情况就有所改变。

> name: Jason Chang \
> birthdate: Jan 20, 2001 \
> gender: male \
> address: 20 Yamaha Street\
> city: Beijing

> name: Jessie Li \
> birthdate: Dec 4, 1992 \
> gender: female \
> address: 200 Sichuan Street\
> city: Shanghai

这种结构将每个人视为一个**实体**（entity），每个实体被赋予了若干**属性**（attributes），比如姓名（name）、生日（birthdate）、住址（address）等。属性的**取值**（value）对实体进行了刻画。基于这样的结构，我们可以将实体整体存入系统，也可以将它们整体取出来。不仅如此，系统还可以对单个属性进行操作，比如改动某个人的住址。如果要查找居住在地址20 Yamaha Street的人，我们可以直接要求系统找到在address属性上的取值为“20 Yamaha Street”的实体。计算机利用属性和取值的固定格式，可以轻易做到这一点。

通过以上的例子，我们看到，数据管理系统的数据存取接口很大程度上取决于数据的组织结构。当数据的组织结构很简单时，系统只能提供简单的数据存取方式。当数据的组织结构变得更加精细时，系统就可以提供更多样化的数据存取方式，从而满足跟广泛的数据存取需求。数据的组织结构有一个更正式的名称，叫**数据模型**。数据模型严格定义了数据的组织结构，也严格定义了其组织结构的含义。有了数据模型，系统就可以根据数据的组织结构去处理数据，用户也可以根据它去表达自己的数据存取需求。键值对是一种简单的数据模型。通过属性描述的实体是另一种更加复杂的数据模型。

那么，一个数据管理系统到底应该使用简单的还是复杂的数据模型呢？一方面，我们希望数据管理系统的接口简单，这样不仅易于使用，也更符合模块化的标准。另一方面，我们希望数据管理系统的功能强大，即系统可以承载更多的数据处理功能，满足用户更多的数据存取需求，从而减轻应用程序的负担。也就是说，我们希望有一个足够简单的模型，但这个模型又具备尽可能强的“表达能力”。（我们用“表达能力”衡量用户能够通过模型表述多少种类的数据存取需求。）然而，事与愿违。我们发现，当一个模型比较简单时，它的表达能力通常较弱。比如，当我们使用键值对模型时，我们就只能使用键对数据进行存取。当我们追求更强的表达能力时，模型就会变得复杂。最极端的例子就是程序设计语言。使用程序设计语言，我们可以指挥计算机完成任何数据处理任务。（大部分程序设计语言都是图灵完备的。）但如果我们将程序设计语言作为数据管理系统的功能接口，我们实质上就不再需要数据管理系统了，因为所有的数据处理工作已经由程序完成了。

这就又遇到了系统设计的折衷问题。我们只能在简单模型和复杂模型之间取一个折衷，兼顾系统的易用性和功能性。在设计数据管理系统的过程中，数据模型的选择是至关重要的环节，起决定性的作用，也是争论的焦点。它决定了数据管理系统的使用方式和实现方式。在本书接下来的内容中，我们将介绍基于不同数据模型的数据管理系统。而在介绍每一个数据管理系统时，我们将首先讲解它的数据模型。

值得指出的是，数据模型的复杂度和表达能力并不是线性关系。当两个数据模型的复杂程度相当时，并不意味着二者具备同样水平的表达能力。这还取决于模型自身的推理能力。（简单理解，我们可以在模型内部定义一些规则，从而利用规则实现推理。）一个模型的推理能力越强，它的表达能力也会越强。比如，逻辑表达式就比程序设计语言具备更强的推理能力。使用逻辑表达式，我们常常可以更加简洁地表述我们的数据处理需求。但这个问题已经超出了本书的范围。感兴趣的读者可以查阅人工智能教材中关于谓词逻辑、一阶逻辑和高阶逻辑的内容。


